{% extends 'dashboard/dashboard_base.html' %}
{% block content %}
<style>
.responsive-image {
    max-width: 100%;
    height: 200px;
    display: block;
    margin: 0 auto;   /* ✅ centers the image horizontally */
    border-radius: 8px;
    object-fit: cover; /* ✅ ensures image scales nicely without distortion */
}

/* Photo Card */
.album_inner_photo {
    padding: 15px;
    border: 1px solid #e0e0e0;
    border-radius: 10px;
    margin: 10px;
    text-align: center;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}

/* Title & Description */
.album_inner_photo h5 {
    margin-top: 10px;
    font-size: 1.1rem;
    font-weight: 600;
}
.album_inner_photo small {
    display: block;
    margin-top: 5px;
    color: #666;
    font-size: 0.9rem;
}

/* Pagination */
.pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 20px 0;
}
.pagination a {
    margin: 0 5px;
    padding: 10px 15px;
    text-decoration: none;
    color: #007bff;
    border: 1px solid #007bff;
    border-radius: 4px;
    font-weight: bold;
    display: inline-block;
}
.pagination a.active {
    background-color: #007bff;
    color: white;
    border: 1px solid #007bff;
}
.pagination a:hover {
    background-color: #0056b3;
    color: white;
}
.pagination span {
    margin: 0 10px;
    padding: 10px 15px;
    display: inline-block;
    font-weight: bold;
    color: #333;
}
</style>

<div class="content">
    <h1>Photo Albums - {{ category.title }}</h1>
    <p>{{ photos.paginator.count }} photos found in this category.</p>

    <div class="row justify-content-start">
        {% for photo in photos %}
            <div class="album_inner_photo col-md-3">
                <!-- Action Buttons with Icons -->
                <div class="btn-group mb-3" role="group">
                    <a href="{% url 'edit_photo' photo.id %}" class="btn btn-sm btn-outline-primary">
                        <i class="bi bi-pencil-square"></i> Edit
                    </a>
                    <a href="{% url 'delete_photo' photo.id %}" class="btn btn-sm btn-outline-danger" onclick="return confirmDelete();">
                        <i class="bi bi-trash"></i> Delete
                    </a>
                </div>

               <a href="{{ photo.original_image.url }}" target="_blank">
                    <img src="{{ photo.thumbnail.url }}" alt="{{ photo.title }}" class="responsive-image">
                </a>

                <!-- Title + Upload Date -->
                <div class="mt-2">
                    <h5>{{ photo.title }}</h5>
                    <small>Uploaded on {{ photo.uploaded_at|date:"F j, Y" }}</small>
                </div>
            </div>
        {% empty %}
            <p>No photos available in this category.</p>
        {% endfor %}
    </div>

    <!-- Pagination -->
    <div class="pagination">
        {% if photos.has_previous %}
            <a href="?page=1">&laquo; First</a>
            <a href="?page={{ photos.previous_page_number }}">Previous</a>
        {% endif %}
        <span>Page {{ photos.number }} of {{ photos.paginator.num_pages }}</span>
        {% if photos.has_next %}
            <a href="?page={{ photos.next_page_number }}">Next</a>
            <a href="?page={{ photos.paginator.num_pages }}">Last &raquo;</a>
        {% endif %}
    </div>
</div>

<script>
function confirmDelete() {
    return confirm('Are you sure you want to delete this image?');
}
</script>
{% endblock %}
